\section{Basisproblemet}
Vi har indgået en kontrakt med ejeren af et gaslager, hvori der kan lagres naturgas. Vi har lejet dette gaslager for et år, og vi skal nu forsøge at maksimere profitten ved køb og salg af gassen. Vi har en forward-kurve på prisen, således at vi til hver en tid i lejekontrakten kan se hvad prisen for gas bliver. Der er øvre og nedre grænser for beholdningen i gaslaget, og ved lejekontraktens udløb vil ejeren købe den resterende gas til prisen på det tidspunkt. Vi opstillere en tabel \ref{table:1} med de forskellige variable, som vi skal bruge til at løse optimeringsproblemet:

\begin{table}[h!]
\centering
\begin{tabular}{||c | c||} 
 \hline
 Variabel & Beskrivelse \\ [0.5ex] 
 \hline\hline
 $t$ & Tidsskridt  \\ 
 $T$ & Sluttid  \\
 $q_{t}$ & Gasenheder til tiden $t$  \\
 $\Delta q_{t}$ & Ændringen i gasenheder,    $q_{t}-q_{t-1}$ \\
 $q_{0}$ & Gasenheder i starten af lejeperioden  \\
 $q_{min}$ & Den nedre grænse for gasenheder \\ 
 $q_{max}$ & Den øvre grænse for gasenheder \\
 $u_{max}$ & Antal gasenheder der kan tages ud af lageret mellem to tidsskridt \\ 
 $i_{max}$ & Antal gasenheder der kan sættes ind på lageret mellem to tidsskridt \\ 
 $p_{t}$ & En forward pris i Euro på en gasenhed  \\
 $r$ & En fast årlig diskonteringsrente  \\
 [1ex] 
 \hline
\end{tabular}
\caption{Table to test captions and labels}
\label{table:1}
\end{table}

I basisproblemet er $q_{min}$, $q_{max}$, $i_{max}$ og $u_{max}$ statiske. Det vil sige, at de ikke ændrer sig i hele lejeperiden. Hvis vi ønsker at maksimere nutidsværdien af profitten fås:
\begin{equation}
\max_{\Delta p_{t}} \Bigg\{ -\sum_{t=1}^{T} \mathrm{e}^{-r\frac{t}{T}} \Delta q_{t} p_{t}+ \mathrm{e}^{-r}q_{T}p_{T} \Bigg\} \
\end{equation}
Her ville bibetingelserne være:\\
1. $q_{min} \leq q_{t} \leq q_{max}$\\
2. $\Delta q_{t} \in \{-u_{max},-u_{max}+1,\cdots,-1,0,1,\cdots,i_{max}-1,i_{max} \}$ \\
for $t \in \{1,\cdots,T\}$ hvor gasmængden lagret til tiden, $t$, er $q_{t}=q_{0}+\sum_{s=1}^{t} \Delta q_{s}$.

\section{Grafen for basisproblemet}
Vi kan med udgangspunkt i afsnittet om grafteori opstille en graf for vores basisproblem. Grafen er en simpel, orienteret, vægtet graf. Vi opstiller et simplificeret eksempel på grafen med følgende data:
\begin{itemize}
  \item $t \in \{1,2,3,4,5,6\}$
  \item $q_{0}=1$
  \item $q_{min}=0$
  \item $q_{max}=2$
  \item $i_{max}=1$
  \item $u_{max}=1$
  \item $p_{6}=(20,22,25,18,15,15)$
\end{itemize}

\input{fig/tikz/gaslager/forsimplet_graf}

Vi ganger med -1 for at gøre det til et korteste vej problem:

\input{fig/tikz/gaslager/omvendt_graf}

Vi lægger 30 til alle tal, da Dijkstras algoritme kun virker på ikke-negative tal:


\input{fig/tikz/gaslager/omvendt_positiv_graf}

Vi vil nu opstille en tabel over de mulige veje gennem grafen, på samme måde som i eksempel (Dijkstras - indsæt ref)

#\input{fig/tab/gaslager/tabel_graf}


